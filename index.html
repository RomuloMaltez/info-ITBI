<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Como Entender Seu ITBI - Porto Velho</title>
    <link rel="icon" type="image/png" href="imagem_icon-removebg-preview.png">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        'pv-blue-900': '#1e3a5f',
                        'pv-blue-700': '#26476f',
                        'pv-yellow-500': '#f2c94c',
                        'pv-green-600': '#70b643',
                        'pv-gray-100': '#f5f5f5',
                        'pv-gray-200': '#e5e7eb',
                    }
                }
            }
        }
    </script>
    <style>
        :root {
            --pv-blue-900: #1e3a5f;
            --pv-blue-700: #26476f;
            --pv-yellow-500: #f2c94c;
            --pv-green-600: #70b643;
            --pv-gray-100: #f5f5f5;
            --pv-gray-200: #e5e7eb;
        }
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Poppins', 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            line-height: 1.6;
            background: var(--pv-gray-100);
            min-height: 100vh;
        }

        .site-search-highlight {
            background-color: #fff3a4;
            color: inherit;
            padding: 0 0.15em;
            border-radius: 0.2rem;
            box-shadow: 0 0 0 2px rgba(255, 235, 59, 0.35);
        }

        .sr-only {
            position: absolute;
            width: 1px;
            height: 1px;
            padding: 0;
            margin: -1px;
            overflow: hidden;
            clip: rect(0, 0, 0, 0);
            white-space: nowrap;
            border: 0;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }

        .header {
            text-align: center;
            color: white;
            margin-bottom: 40px;
            padding: 40px 20px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 20px;
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.2);
        }

        .header h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }

        .header p {
            font-size: 1.2em;
            opacity: 0.9;
        }

        .section {
            background: white;
            margin: 30px 0;
            padding: 30px;
            border-radius: 15px;
            box-shadow: 0 8px 25px rgba(0,0,0,0.1);
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }

        .section:hover {
            transform: translateY(-5px);
            box-shadow: 0 12px 35px rgba(0,0,0,0.15);
        }

        .section-title {
            color: #d63031;
            font-size: 1.8em;
            margin-bottom: 20px;
            display: flex;
            align-items: center;
            border-bottom: 3px solid #fd79a8;
            padding-bottom: 10px;
        }

        .icon {
            font-size: 2em;
            margin-right: 15px;
        }

        .calculation-box {
            background: linear-gradient(135deg, #fd79a8 0%, #fdcb6e 100%);
            color: white;
            padding: 25px;
            border-radius: 12px;
            margin: 20px 0;
            text-align: center;
            font-size: 1.2em;
            font-weight: bold;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
            border: 1px solid rgba(255,255,255,0.2);
        }

        .formula-box {
            background: linear-gradient(135deg, #ffeaa7 0%, #fab1a0 100%);
            border: 2px solid #fd79a8;
            border-radius: 12px;
            padding: 20px;
            margin: 20px 0;
            text-align: center;
            font-family: 'Courier New', monospace;
        }

        .formula-title {
            color: #d63031;
            font-size: 1.1em;
            font-weight: bold;
            margin-bottom: 10px;
            font-family: 'Segoe UI', sans-serif;
        }

        .formula-content {
            font-size: 1.3em;
            color: #2d3436;
            margin: 10px 0;
        }

        .formula-variables {
            font-size: 0.9em;
            color: #636e72;
            margin-top: 10px;
            font-family: 'Segoe UI', sans-serif;
            text-align: left;
        }

        .factor-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin: 20px 0;
        }

        .factor-card {
            background: linear-gradient(135deg, #fd79a8 0%, #e84393 100%);
            color: white;
            padding: 20px;
            border-radius: 10px;
            text-align: center;
            transition: transform 0.3s ease;
        }

        .factor-card:hover {
            transform: scale(1.05);
        }

        .factor-card h4 {
            margin-bottom: 10px;
            font-size: 1.1em;
        }

        .factor-value {
            font-size: 2em;
            font-weight: bold;
            margin: 10px 0;
        }

        .example-house {
            background: linear-gradient(135deg, #ffeaa7 0%, #fab1a0 100%);
            padding: 25px;
            border-radius: 15px;
            border-left: 5px solid #e17055;
            margin: 20px 0;
        }

        .house-info {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin: 15px 0;
        }

        .info-item {
            background: rgba(255, 255, 255, 0.8);
            padding: 15px;
            border-radius: 8px;
            text-align: center;
        }

        .info-item strong {
            color: #d63031;
            display: block;
            font-size: 1.1em;
        }

        .table-container {
            overflow-x: auto;
            margin: 20px 0;
        }

        table {
            width: 100%;
            border-collapse: collapse;
            font-size: 0.9em;
            background: white;
            border-radius: 8px;
            overflow: hidden;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
        }

        th, td {
            border: 1px solid #e5e7eb;
            padding: 12px 8px;
            text-align: center;
        }

        th {
            background: linear-gradient(135deg, #fab1a0 0%, #fd79a8 100%);
            color: white;
            font-weight: 600;
            font-size: 0.9em;
        }

        td {
            background-color: #f9fafb;
        }

        .highlight {
            background-color: #ffeaa7 !important;
            font-weight: bold;
        }

        .progress-bar {
            background: #ecf0f1;
            border-radius: 10px;
            overflow: hidden;
            margin: 20px 0;
            position: relative;
            height: 40px;
        }

        .progress-fill {
            background: linear-gradient(90deg, #fd79a8, #e84393);
            height: 100%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: bold;
            transition: width 2s ease;
            position: relative;
            min-width: 0;
        }

        .progress-text {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            color: #2d3436;
            font-weight: 600;
            font-size: 0.875rem;
            z-index: 10;
            padding: 0 10px;
            text-align: center;
            width: 100%;
            pointer-events: none;
            box-sizing: border-box;
            overflow: hidden;
            text-overflow: ellipsis;
        }

        @media (max-width: 768px) {
            .progress-text {
                font-size: 0.7rem;
                padding: 0 8px;
            }
        }

        @media (max-width: 480px) {
            .progress-text {
                font-size: 0.65rem;
                padding: 0 5px;
            }
        }

        .final-result {
            background: linear-gradient(135deg, #fd79a8 0%, #e84393 100%);
            color: white;
            padding: 30px;
            border-radius: 15px;
            text-align: center;
            font-size: 1.5em;
            margin: 30px 0;
            box-shadow: 0 8px 25px rgba(0,0,0,0.2);
        }

        .tip-box {
            background: #ffeaa7;
            border: 1px solid #fab1a0;
            border-radius: 8px;
            padding: 20px;
            margin: 20px 0;
            border-left: 4px solid #fd79a8;
            color: #2d3436;
        }

        .tip-box::before {
            content: "üí° ";
            font-size: 1.5em;
        }

        .warning-box {
            background: #ffe0e6;
            border: 1px solid #fd79a8;
            border-radius: 8px;
            padding: 20px;
            margin: 20px 0;
            border-left: 4px solid #d63031;
            color: #2d3436;
        }

        .warning-box::before {
            content: "‚ö†Ô∏è ";
            font-size: 1.5em;
        }

        .interactive-button {
            background: linear-gradient(135deg, #fd79a8 0%, #e84393 100%);
            color: white;
            border: none;
            padding: 15px 30px;
            border-radius: 25px;
            font-size: 1.1em;
            cursor: pointer;
            transition: all 0.3s ease;
            margin: 10px;
        }

        .interactive-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
        }

        .interactive-button-primary {
            background: linear-gradient(135deg, #e84393 0%, #d63031 100%) !important;
            padding: 18px 40px !important;
            font-size: 1.3em !important;
            font-weight: bold !important;
            animation: pulse 2s infinite !important;
        }

        .interactive-button-secondary {
            background: rgba(253, 121, 168, 0.1) !important;
            color: #fd79a8 !important;
            border: 2px solid #fd79a8 !important;
        }

        @keyframes pulse {
            0%, 100% { box-shadow: 0 8px 25px rgba(232, 67, 147, 0.3); }
            50% { box-shadow: 0 8px 25px rgba(232, 67, 147, 0.5); }
        }

        .step-indicator {
            display: flex;
            justify-content: center;
            margin: 20px 0;
        }

        .step {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background: #fab1a0;
            color: white;
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 0 10px;
            font-weight: bold;
            transition: all 0.3s ease;
            cursor: pointer;
        }

        .step.active {
            background: #fd79a8;
            transform: scale(1.2);
        }

        .hidden {
            display: none;
        }

        .type-selector {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin: 20px 0;
        }

        .type-card {
            background: linear-gradient(135deg, #74b9ff 0%, #0984e3 100%);
            color: white;
            padding: 30px;
            border-radius: 15px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
            border: 3px solid transparent;
        }

        .type-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 25px rgba(0,0,0,0.2);
        }

        .type-card.selected {
            border: 3px solid #00b894;
            background: linear-gradient(135deg, #00b894 0%, #00cec9 100%);
        }

        @media (max-width: 768px) {
            .header h1 { font-size: 2em; }
            .section { padding: 20px; }
            .factor-grid { grid-template-columns: 1fr; }
            .house-info { grid-template-columns: 1fr; }
            .type-selector { grid-template-columns: 1fr; }
            th, td { padding: 8px 4px; font-size: 0.8em; }
        }
    </style>
</head>
<body>
    <!-- Header SEMEC -->
    <header class="border-b border-slate-200 bg-white">
        <div class="mx-auto flex w-full max-w-6xl flex-col gap-6 px-4 py-4 lg:grid lg:grid-cols-[220px_minmax(0,1fr)_300px] lg:items-center lg:gap-8">
            <div class="order-1 flex w-full items-center justify-center self-center lg:order-1 lg:w-auto lg:justify-start lg:self-start lg:pr-4">
                <a href="#" aria-label="Ir para a p√°gina inicial da SEMEC Porto Velho" class="shrink-0">
                    <img src="logo-semec.svg" alt="Logotipo da Prefeitura de Porto Velho - SEMEC" width="200" height="200" class="object-contain" style="width: 200px; height: 200px;">
                </a>
            </div>

            <div class="order-3 flex w-full items-center lg:order-2">
                <div class="flex h-full w-full items-center justify-center overflow-visible">
                    <div class="relative w-full max-w-[1280px]">
                        <img src="PortoVelhoPintura.svg" alt="Ilustra√ß√£o linear destacando pontos tur√≠sticos de Porto Velho" width="3200" height="1000" class="h-[190px] w-full object-cover">
                    </div>
                </div>
            </div>

            <div class="order-2 relative flex flex-col gap-3 lg:order-3 lg:items-end lg:justify-center">
                <div class="flex w-full items-center justify-center gap-3 lg:w-[300px] lg:justify-end">
                    <div class="flex items-center gap-2">
                        <a href="https://www.instagram.com/semec.pvh/" target="_blank" rel="noopener noreferrer" aria-label="Instagram da SEMEC" class="inline-flex h-14 w-14 items-center justify-center rounded-md border border-rose-100 bg-rose-50 text-[#E1306C] shadow-sm transition hover:border-rose-200 hover:bg-rose-100 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-[#E1306C]">
                            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true">
                                <rect width="20" height="20" x="2" y="2" rx="5" ry="5"></rect>
                                <path d="M16 11.37A4 4 0 1 1 12.63 8 4 4 0 0 1 16 11.37z"></path>
                                <line x1="17.5" x2="17.51" y1="6.5" y2="6.5"></line>
                            </svg>
                        </a>
                        <a href="https://api.whatsapp.com/send?phone=556999425251" target="_blank" rel="noopener noreferrer" aria-label="WhatsApp da SEMEC" class="inline-flex h-14 w-14 items-center justify-center rounded-md border border-emerald-100 bg-emerald-50 text-emerald-700 shadow-sm transition hover:border-emerald-200 hover:bg-emerald-100 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-emerald-300">
                            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true">
                                <path d="M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893a11.821 11.821 0 00-3.48-8.413z"></path>
                            </svg>
                        </a>
                    </div>
                    <button id="search-toggle" type="button" aria-label="Abrir busca" class="inline-flex h-14 w-14 items-center justify-center rounded-md border border-slate-200 bg-white text-slate-700 shadow-sm transition hover:bg-slate-50 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-slate-700">
                        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true">
                            <circle cx="11" cy="11" r="8"></circle>
                            <path d="m21 21-4.3-4.3"></path>
                        </svg>
                    </button>
                </div>

                <form id="site-search-form" class="hidden absolute top-full left-1/2 -translate-x-1/2 mt-2 z-50 flex w-full max-w-[300px] flex-col gap-2 lg:w-[300px]" aria-label="Barra de busca do portal">
                    <div class="flex w-full items-center rounded-md border border-slate-200 bg-white shadow-sm focus-within:border-[color:var(--pv-blue-900)] focus-within:ring-2 focus-within:ring-[color:var(--pv-blue-900)]/10">
                        <label for="site-search" class="sr-only">O que voc√™ procura?</label>
                        <span class="pl-3 text-slate-500">
                            <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true">
                                <circle cx="11" cy="11" r="8"></circle>
                                <path d="m21 21-4.3-4.3"></path>
                            </svg>
                        </span>
                        <input id="site-search" name="search" type="search" minlength="3" placeholder="O que voc√™ procura?" class="w-full border-0 bg-transparent px-3 py-2 text-sm text-slate-900 placeholder:text-slate-400 focus:outline-none">
                        <button type="submit" class="rounded-r-md bg-[color:var(--pv-yellow-500)] px-4 py-2 text-sm font-semibold text-slate-900 transition hover:bg-yellow-400 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-yellow-400">Buscar</button>
                    </div>
                    <p id="search-feedback" class="text-xs font-medium text-[color:var(--pv-blue-900)] hidden"></p>
                </form>
            </div>
        </div>
    </header>
    <div aria-hidden="true" class="h-5 w-full border-b-4 border-[#FFDD00] bg-[#70B643]"></div>

    <!-- Conte√∫do Principal -->
    <div class="container mx-auto px-4 py-8 max-w-4xl" data-search-root>
        <div class="bg-white rounded-lg shadow-lg p-6 mb-6">
            <h1 class="text-3xl font-bold mb-2">üìã Como Entender Seu ITBI</h1>
            <p class="text-lg">Desvendando de forma simples como √© calculado o Imposto de Transmiss√£o de Bens Im√≥veis</p>
        </div>

        <div class="step-indicator">
            <div class="step active" data-step="1">1</div>
            <div class="step" data-step="2">2</div>
            <div class="step" data-step="3">3</div>
            <div class="step" data-step="4">4</div>
            <div class="step" data-step="5">5</div>
        </div>

        <!-- Se√ß√£o 1: Introdu√ß√£o -->
        <div class="section step-content" data-step="1">
            <h2 class="section-title">
                <span class="icon">üéØ</span>
                O que √© o ITBI?
            </h2>
            <p style="font-size: 1.1em; margin-bottom: 20px;">
                O ITBI √© o <strong>Imposto sobre a Transmiss√£o de Bens Im√≥veis</strong>. √â o imposto que voc√™ paga quando 
                compra, recebe, permuta ou adquire qualquer im√≥vel (casa, apartamento, terreno, etc.) no munic√≠pio de Porto Velho.
            </p>
            
            <p style="font-size: 1.1em; margin-bottom: 20px; background: #f8f9fa; padding: 15px; border-radius: 8px; border-left: 4px solid #fd79a8;">
                üí° <strong>Pense assim:</strong> Quando voc√™ compra um carro, precisa pagar taxas para transferi-lo para o seu nome, certo? O ITBI √© parecido, mas para im√≥veis (casas, terrenos, apartamentos, etc.). Ele √© fundamental para formalizar a transa√ß√£o e garantir que o im√≥vel seja legalmente seu, permitindo o registro no Cart√≥rio de Im√≥veis.
            </p>

            <div class="example-house">
                <h3>üè° Exemplos de quando se paga ITBI:</h3>
                <div class="house-info">
                    <div class="info-item">
                        <strong>Compra e Venda</strong><br>
                        Voc√™ comprou uma casa<br>
                        Paga ITBI sobre o valor
                    </div>
                    <div class="info-item">
                        <strong>Permuta</strong><br>
                        Trocou seu apartamento<br>
                        por uma casa
                    </div>
                    <div class="info-item">
                        <strong>Doa√ß√£o Onerosa</strong><br>
                        Recebeu um terreno<br>
                        em da√ß√£o de pagamento
                    </div>
                    <div class="info-item">
                        <strong>Leil√£o</strong><br>
                        Arrematou um im√≥vel<br>
                        em hasta p√∫blica
                    </div>
                </div>
            </div>

            <div class="warning-box">
                <strong>Aten√ß√£o importante:</strong> O ITBI deve ser pago ANTES do cart√≥rio fazer o registro da compra! 
                Sem o comprovante de pagamento, o cart√≥rio n√£o pode fazer a escritura nem registrar o im√≥vel no seu nome.
            </div>

            <div class="factor-grid">
                <div class="factor-card">
                    <h4>üìä Al√≠quota √önica</h4>
                    <div class="factor-value">2%</div>
                    <p>Para qualquer tipo de im√≥vel em Porto Velho</p>
                </div>
                <div class="factor-card">
                    <h4>üéØ Base de C√°lculo</h4>
                    <div class="factor-value">Valor do Im√≥vel</div>
                    <p>O maior valor entre: mercado, venal ou declarado</p>
                </div>
            </div>

            <div class="tip-box">
                <strong>Como funciona:</strong> Diferente do IPTU (que voc√™ paga todo ano), o ITBI √© pago apenas UMA VEZ, 
                no momento da transfer√™ncia do im√≥vel. O c√°lculo muda conforme o tipo de im√≥vel: urbano ou rural.
            </div>

            <button class="interactive-button" onclick="nextStep()">Vamos aprender como calcular! ‚Üí</button>
        </div>

        <!-- Se√ß√£o 2: Escolha do Tipo -->
        <div class="section step-content hidden" data-step="2">
            <h2 class="section-title">
                <span class="icon">üè†</span>
                Primeiro: Que Tipo de Im√≥vel?
            </h2>
            
            <p style="font-size: 1.1em; margin-bottom: 20px;">
                O c√°lculo do ITBI muda conforme o tipo de im√≥vel. Escolha abaixo qual situa√ß√£o se parece com a sua 
                e vamos calcular juntos!
            </p>

            <div class="type-selector">
                <div class="type-card" onclick="selectType('urbano')" id="urbano-card">
                    <h3>üè¢ Im√≥vel Urbano</h3>
                    <p style="margin: 15px 0;">Casa, apartamento, terreno ou loja na cidade</p>
                    <ul style="text-align: left; margin: 10px 0;">
                        <li>Localizado na √°rea urbana</li>
                        <li>Tem endere√ßo com CEP</li>
                        <li>Paga IPTU urbano</li>
                        <li>√Årea medida em m¬≤</li>
                    </ul>
                </div>
                
                <div class="type-card" onclick="selectType('rural')" id="rural-card">
                    <h3>üåæ Im√≥vel Rural</h3>
                    <p style="margin: 15px 0;">Fazenda, s√≠tio, ch√°cara ou terreno rural</p>
                    <ul style="text-align: left; margin: 10px 0;">
                        <li>Localizado na zona rural</li>
                        <li>Paga ITR (imposto federal)</li>
                        <li>√Årea medida em hectares</li>
                        <li>Tem ou pode ter atividade agropecu√°ria</li>
                    </ul>
                </div>
            </div>

            <div class="tip-box">
                <strong>D√∫vida sobre urbano x rural?</strong> Se seu im√≥vel fica dentro dos limites da cidade de Porto Velho, 
                com rua definida e numera√ß√£o urbana, provavelmente √© urbano. Se fica em √°rea de fazenda, s√≠tio ou zona rural, 
                √© rural. Na d√∫vida, consulte a SEMFAZ.
            </div>

            <div class="progress-bar">
                <div class="progress-fill" style="width: 20%;"></div>
                <div class="progress-text">Escolha o tipo do seu im√≥vel</div>
            </div>

            <div style="text-align: center; margin-top: 20px;">
                <button class="interactive-button" id="continue-button" onclick="nextStep()" style="opacity: 0.5; cursor: not-allowed;" disabled>
                    Continuar ap√≥s escolher o tipo ‚Üí
                </button>
            </div>
        </div>

        <!-- Se√ß√£o 3: C√°lculo Urbano -->
        <div class="section step-content hidden" data-step="3" id="urbano-section">
            <h2 class="section-title">
                <span class="icon">üè¢</span>
                Calculando ITBI para Im√≥vel Urbano
            </h2>
            
            <p style="font-size: 1.1em; margin-bottom: 20px;">
                Para im√≥veis urbanos, o ITBI √© calculado sobre o <strong>maior valor</strong> entre o valor de mercado 
                (avalia√ß√£o da prefeitura), o valor venal (usado no IPTU) ou o valor declarado na compra.
            </p>

            <div class="example-house">
                <h4>üè° Exemplo: Compra de Apartamento</h4>
                <p><strong>Apartamento no Centro de Porto Velho</strong><br>
                Valor declarado na compra: R$ 180.000,00</p>
            </div>

            <div style="background: #e8f4fd; padding: 20px; border-radius: 10px; margin: 20px 0; border-left: 4px solid #fd79a8;">
                <h4 style="color: #2d3436; margin-bottom: 10px;">üîç Como a prefeitura determina o valor:</h4>
                <p><strong>üìä Valor de Mercado:</strong> Avalia√ß√£o baseada em im√≥veis similares vendidos na regi√£o.</p>
                <p><strong>üè† Valor Venal:</strong> Valor usado para calcular seu IPTU (consulte no carn√™).</p>
                <p><strong>üí∞ Valor Declarado:</strong> Pre√ßo que voc√™ pagou, informado na escritura.</p>
                <p style="margin-top: 15px; font-weight: bold; color: #d63031;">A prefeitura usa o MAIOR dos tr√™s valores!</p>
            </div>

            <div class="factor-grid">
                <div class="factor-card">
                    <h4>üí∞ Valor Declarado</h4>
                    <div class="factor-value">R$ 180.000</div>
                    <p>Pre√ßo que voc√™ est√° pagando pelo im√≥vel</p>
                </div>
                <div class="factor-card">
                    <h4>üè† Valor Venal (IPTU)</h4>
                    <div class="factor-value">R$ 165.000</div>
                    <p>Valor que consta no carn√™ do IPTU</p>
                </div>
                <div class="factor-card">
                    <h4>üìä Valor de Mercado</h4>
                    <div class="factor-value">R$ 175.000</div>
                    <p>Avalia√ß√£o da prefeitura</p>
                </div>
            </div>

            <div class="calculation-box">
                <h3>üéØ Base de C√°lculo do ITBI</h3>
                <p>Maior valor entre: R$ 180.000, R$ 165.000 e R$ 175.000</p>
                <div style="font-size: 1.5em; margin: 15px 0; font-family: 'Courier New', monospace;">
                    Base = <strong>R$ 180.000,00</strong>
                </div>
            </div>

            <div class="formula-box">
                <div class="formula-title">üßÆ F√≥rmula do ITBI</div>
                <div class="formula-content">ITBI = Base de C√°lculo √ó 2%</div>
                <div class="formula-content">ITBI = R$ 180.000,00 √ó 2%</div>
                <div class="formula-content"><strong>ITBI = R$ 3.600,00</strong></div>
            </div>

            <div class="warning-box">
                <strong>Cuidado com valores muito baixos!</strong> Se voc√™ declarar um valor muito abaixo do mercado, 
                a prefeitura pode solicitar uma reavalia√ß√£o. √â melhor ser realista no valor declarado.
            </div>

            <div class="progress-bar">
                <div class="progress-fill" style="width: 60%;"></div>
                <div class="progress-text">ITBI Urbano: R$ 3.600,00</div>
            </div>

            <button class="interactive-button" onclick="nextStep()">Ver situa√ß√µes especiais ‚Üí</button>
        </div>

        <!-- Se√ß√£o 3: C√°lculo Rural -->
        <div class="section step-content hidden" data-step="3" id="rural-section">
            <h2 class="section-title">
                <span class="icon">üåæ</span>
                Calculando ITBI para Im√≥vel Rural
            </h2>
            
            <p style="font-size: 1.1em; margin-bottom: 20px;">
                Para im√≥veis rurais, o c√°lculo √© baseado na <strong>Tabela de Valor da Terra Nua (VTN)</strong> 
                multiplicada pela √°rea, mais o valor das benfeitorias (casas, cercas, currais, etc.).
            </p>

            <div class="example-house">
                <h4>üåæ Exemplo: Compra de S√≠tio</h4>
                <p><strong>S√≠tio na zona rural de Porto Velho</strong><br>
                √Årea: 5 hectares (50.000 m¬≤) com casa simples</p>
            </div>

            <div style="background: #f0fdf4; padding: 20px; border-radius: 10px; margin: 20px 0; border-left: 4px solid #fd79a8;">
                <h4 style="color: #2d3436; margin-bottom: 10px;">üå± Como calcular im√≥vel rural:</h4>
                <p><strong>üó∫Ô∏è Valor da Terra Nua:</strong> Hectare √ó <a href="https://semfaz.portovelho.ro.gov.br/arquivos/lista/52319?laudo-de-avaliacao-de-valor-da-terra-nua" target="_blank">VTN (valor por hectare da regi√£o)</a>.</p>
                <p><strong>üè† Benfeitorias:</strong> Casas, galp√µes, cercas, po√ßos, etc.</p>
                <p><strong>üí∞ Valor Declarado:</strong> Pre√ßo total que voc√™ est√° pagando.</p>
                <p style="margin-top: 15px; font-weight: bold; color: #d63031;">Usa-se o MAIOR valor entre VTN+benfeitorias e valor declarado!</p>
            </div>

            <div class="factor-grid">
                <div class="factor-card">
                    <h4>üìè √Årea Total</h4>
                    <div class="factor-value">5 ha</div>
                    <p>Hectares do im√≥vel rural (50.000 m¬≤)</p>
                </div>
                <div class="factor-card">
                    <h4>üåæ VTN por Hectare</h4>
                    <div class="factor-value">R$ 4.500</div>
                    <p>Valor da Terra Nua para a regi√£o</p>
                </div>
                <div class="factor-card">
                    <h4>üè† Benfeitorias</h4>
                    <div class="factor-value">R$ 35.000</div>
                    <p>Casa simples, cerca e po√ßo</p>
                </div>
            </div>

            <div class="calculation-box">
                <h3>üßÆ C√°lculo Detalhado</h3>
                <div style="font-family: 'Courier New', monospace; text-align: left; background: rgba(255,255,255,0.2); padding: 15px; border-radius: 8px; margin: 15px 0;">
                    <strong>1. Valor da Terra:</strong><br>
                    5 hectares √ó R$ 4.500 = R$ 22.500<br><br>
                    <strong>2. Total VTN + Benfeitorias:</strong><br>
                    R$ 22.500 + R$ 35.000 = R$ 57.500<br><br>
                    <strong>3. Valor Declarado:</strong><br>
                    R$ 60.000 (pre√ßo da compra)<br><br>
                    <strong>4. Base de C√°lculo:</strong><br>
                    Maior valor = R$ 60.000
                </div>
            </div>

            <div class="formula-box">
                <div class="formula-title">üßÆ F√≥rmula do ITBI Rural</div>
                <div class="formula-content">ITBI = Base de C√°lculo √ó 2%</div>
                <div class="formula-content">ITBI = R$ 60.000,00 √ó 2%</div>
                <div class="formula-content"><strong>ITBI = R$ 1.200,00</strong></div>
            </div>

            <div class="tip-box">
                <strong>Sobre a VTN:</strong> A Tabela de Valor da Terra Nua √© atualizada anualmente e varia conforme 
                a regi√£o do munic√≠pio. Para consultar o valor exato, procure a SEMFAZ ou acesse o portal da prefeitura.
            </div>

            <div class="progress-bar">
                <div class="progress-fill" style="width: 60%;"></div>
                <div class="progress-text">ITBI Rural: R$ 1.200,00</div>
            </div>

            <button class="interactive-button" onclick="nextStep()">Ver situa√ß√µes especiais ‚Üí</button>
        </div>

        <!-- Se√ß√£o 4: Situa√ß√µes Especiais -->
        <div class="section step-content hidden" data-step="4">
            <h2 class="section-title">
                <span class="icon">‚öñÔ∏è</span>
                Situa√ß√µes Especiais e Isen√ß√µes
            </h2>
            
            <p style="font-size: 1.1em; margin-bottom: 20px;">
                Nem toda transmiss√£o de im√≥vel paga ITBI! Existem situa√ß√µes onde h√° isen√ß√£o ou n√£o incid√™ncia do imposto. 
                Veja as principais situa√ß√µes:
            </p>

            <h4 style="color: #d63031; margin: 20px 0 10px 0;">üö´ Quando N√ÉO se paga ITBI:</h4>
            <div class="table-container">
                <table>
                    <thead>
                        <tr>
                            <th>Situa√ß√£o</th>
                            <th>Explica√ß√£o</th>
                            <th>Exemplo</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td><strong>Heran√ßa</strong></td>
                            <td>Im√≥vel recebido por morte</td>
                            <td>Filho herda casa dos pais</td>
                        </tr>
                        <tr>
                            <td><strong>Doa√ß√£o entre parentes</strong></td>
                            <td>Doa√ß√£o sem pagamento</td>
                            <td>Pais doam casa para filho</td>
                        </tr>
                        <tr>
                            <td><strong>Incorpora√ß√£o ao capital</strong></td>
                            <td>Im√≥vel vira capital de empresa</td>
                            <td>Integraliza√ß√£o de capital social</td>
                        </tr>
                        <tr class="highlight">
                            <td><strong>Regulariza√ß√£o Fundi√°ria</strong></td>
                            <td>Primeira escritura em programa municipal</td>
                            <td>Titula√ß√£o de terreno irregular</td>
                        </tr>
                    </tbody>
                </table>
            </div>

            <h4 style="color: #d63031; margin: 20px 0 10px 0;">üí∞ Situa√ß√µes com C√°lculo Diferenciado:</h4>
            
            <div class="factor-grid">
                <div class="factor-card">
                    <h4>üè† Usufruto</h4>
                    <div class="factor-value">2/3 do valor</div>
                    <p>Direito de usar o im√≥vel sem ser dono</p>
                </div>
                <div class="factor-card">
                    <h4>üí∞ Leil√£o Judicial</h4>
                    <div class="factor-value">Valor da arremata√ß√£o</div>
                    <p>Pre√ßo pelo qual foi arrematado</p>
                </div>
                <div class="factor-card">
                    <h4>üèòÔ∏è Sistema Financeiro Habita√ß√£o</h4>
                    <div class="factor-value">Valor da compra</div>
                    <p>Financiamento habitacional</p>
                </div>
            </div>

            <div class="warning-box">
                <strong>Aten√ß√£o para empresas:</strong> Se voc√™ comprar im√≥vel em nome de empresa cujo neg√≥cio principal 
                √© comprar e vender im√≥veis (mais de 50% da receita), pode perder a isen√ß√£o e ter que pagar o ITBI 
                retroativamente!
            </div>

            <div class="example-house">
                <h4>üìã Exemplo: Divis√£o em Div√≥rcio</h4>
                <p><strong>Casal se divorcia e divide os bens:</strong><br>
                Casa vale R$ 200.000 - Marido fica com a casa, esposa com R$ 100.000 em outros bens<br>
                <strong>ITBI:</strong> N√£o paga, pois cada um recebeu 50% (sua parte justa)</p>
                
                <p style="margin-top: 15px;"><strong>Mas se o marido ficasse com casa de R$ 200.000 e a esposa com apenas R$ 50.000:</strong><br>
                <strong>ITBI:</strong> Paga sobre R$ 50.000 (valor que excedeu a parte justa da esposa)</p>
            </div>

            <div class="tip-box">
                <strong>Regulariza√ß√£o Fundi√°ria:</strong> Se voc√™ est√° regularizando um terreno atrav√©s de programa 
                da prefeitura de Porto Velho, a primeira escritura √© isenta de ITBI. Mas cuidado: se vender depois, 
                a√≠ sim pagar√° ITBI normal!
            </div>

            <div class="progress-bar">
                <div class="progress-fill" style="width: 80%;"></div>
                <div class="progress-text">Situa√ß√µes especiais identificadas</div>
            </div>

            <button class="interactive-button" onclick="nextStep()">Ver resumo final ‚Üí</button>
        </div>

        <!-- Se√ß√£o 5: Resumo Final -->
        <div class="section step-content hidden" data-step="5">
            <h2 class="section-title">
                <span class="icon">üìã</span>
                Resumo Final - Como Pagar o ITBI
            </h2>
            
            <div class="final-result">
                <h3>üéØ ITBI √© sempre 2% do valor do im√≥vel</h3>
                <div style="font-size: 1.2em; margin: 20px 0;">
                    <strong>Base:</strong> Maior valor entre mercado, venal ou declarado<br>
                    <strong>Imposto:</strong> Base √ó 2%
                </div>
            </div>

            <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 20px; margin: 30px 0;">
                <div style="background: linear-gradient(135deg, #74b9ff, #0984e3); color: white; padding: 20px; border-radius: 10px;">
                    <h4>üè¢ Im√≥vel Urbano</h4>
                    <p>Base: Maior entre mercado, venal ou declarado</p>
                    <h3>Exemplo: R$ 3.600</h3>
                    <small>Para im√≥vel de R$ 180.000</small>
                </div>
                
                <div style="background: linear-gradient(135deg, #00b894, #00cec9); color: white; padding: 20px; border-radius: 10px;">
                    <h4>üåæ Im√≥vel Rural</h4>
                    <p>Base: VTN √ó √°rea + benfeitorias</p>
                    <h3>Exemplo: R$ 1.200</h3>
                    <small>Para s√≠tio de R$ 60.000</small>
                </div>
                
                <div style="background: linear-gradient(135deg, #fd79a8, #e84393); color: white; padding: 20px; border-radius: 10px;">
                    <h4>‚öñÔ∏è Situa√ß√µes Especiais</h4>
                    <p>Isen√ß√µes e c√°lculos diferenciados</p>
                    <h3>Varia</h3>
                    <small>Consulte a SEMFAZ</small>
                </div>
            </div>

            <div style="background: #f8f9fa; border: 2px solid #fd79a8; border-radius: 15px; padding: 25px; margin-top: 30px;">
                <h3 style="color: #2d3436; margin-bottom: 20px; text-align: center;">üìã Como Pagar o ITBI</h3>
                
                <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 15px;">
                    <div style="background: #e8f4fd; padding: 15px; border-radius: 8px; text-align: center;">
                        <h5 style="color: #d63031;">1Ô∏è‚É£ Antes do Cart√≥rio</h5>
                        <p>O ITBI deve ser pago ANTES da escritura</p>
                    </div>
                    <div style="background: #e8f4fd; padding: 15px; border-radius: 8px; text-align: center;">
                        <h5 style="color: #d63031;">2Ô∏è‚É£ Declara√ß√£o</h5>
                        <p>Realize o cadastro de ITBI Web no <a href="https://gpi-trb.portovelho.ro.gov.br/ServerExec/acessoBase/?idPortal=dbde30ec-cf59-4803-9653-00121a704021" target="_blank" style="color: #0984e3; text-decoration: underline;">portal</a></p>
                    </div>
                    <div style="background: #e8f4fd; padding: 15px; border-radius: 8px; text-align: center;">
                        <h5 style="color: #d63031;">3Ô∏è‚É£ Pagamento</h5>
                        <p>Quite o boleto gerado</p>
                    </div>
                    <div style="background: #e8f4fd; padding: 15px; border-radius: 8px; text-align: center;">
                        <h5 style="color: #d63031;">4Ô∏è‚É£ Cart√≥rio</h5>
                        <p>Leve o comprovante para a escritura</p>
                    </div>
                </div>
            </div>

            <div style="background: #fff; border: 2px solid #fd79a8; border-radius: 15px; padding: 25px; margin-top: 20px;">
                <h3 style="color: #2d3436; margin-bottom: 20px; text-align: center;">‚ùì Perguntas Frequentes</h3>
                
                <div style="margin-bottom: 15px;">
                    <h4 style="color: #e17055; margin-bottom: 5px;">üí∞ Quem paga o ITBI: comprador ou vendedor?</h4>
                    <p style="margin-left: 15px;">Por lei, quem paga √© o <strong>comprador</strong> (adquirente). Mas na pr√°tica, comprador e vendedor podem combinar quem vai pagar.</p>
                </div>
                
                <div style="margin-bottom: 15px;">
                    <h4 style="color: #e17055; margin-bottom: 5px;">üíª Como gerar o ITBI?</h4>
                    <p style="margin-left: 15px;">Para gerar seu ITBI √© bem simples e totalmente gratuito! Basta voc√™ acessar o <a href="https://gpi-trb.portovelho.ro.gov.br/ServerExec/acessoBase/?idPortal=dbde30ec-cf59-4803-9653-00121a704021" target="_blank" style="color: #0984e3; text-decoration: underline;">portal</a> e escolher a op√ß√£o "cadastro de ITBI Web". Preencha tudo, anexe o documento solicitado e envie sua solicita√ß√£o. Com o n√∫mero de protocolo gerado, voc√™ pode acompanhar e imprimir seu ITBI na op√ß√£o "Consulta de ITBI Web".</p>
                </div>
                
                <div style="margin-bottom: 15px;">
                    <h4 style="color: #e17055; margin-bottom: 5px;">üìÖ Quando pagar o ITBI?</h4>
                    <p style="margin-left: 15px;">ANTES da escritura no cart√≥rio. Sem o comprovante de pagamento, o cart√≥rio n√£o pode registrar a transfer√™ncia.</p>
                </div>
                
                <div style="margin-bottom: 15px;">
                    <h4 style="color: #e17055; margin-bottom: 5px;">üè¶ Posso financiar o ITBI?</h4>
                    <p style="margin-left: 15px;">N√£o, o ITBI deve ser pago √† vista. Alguns bancos incluem o valor do ITBI no financiamento imobili√°rio, mas o pagamento √† prefeitura √© sempre √† vista.</p>
                </div>
                
                <div style="margin-bottom: 15px;">
                    <h4 style="color: #e17055; margin-bottom: 5px;">üí≥ Como pagar o ITBI?</h4>
                    <p style="margin-left: 15px;">Primeiro, voc√™ faz a <a href="https://gpi-trb.portovelho.ro.gov.br/ServerExec/acessoBase/?idPortal=dbde30ec-cf59-4803-9653-00121a704021" target="_blank" style="color: #0984e3; text-decoration: underline;">declara√ß√£o online</a> de ITBI e, com o protocolo do pedido, voc√™ acompanha a emiss√£o do seu ITBI e depois paga o boleto gerado. Normalmente, a prefeitura gera seu ITBI em at√© 3 dias.</p>
                </div>
                
                <div style="margin-bottom: 15px;">
                    <h4 style="color: #e17055; margin-bottom: 5px;">ü§î E se eu achar o valor muito alto?</h4>
                    <p style="margin-left: 15px;">Voc√™ pode pedir reavalia√ß√£o na SEMFAZ dentro do prazo estabelecido, apresentando documentos que comprovem o valor real do im√≥vel.</p>
                </div>
                
                <div style="margin-bottom: 15px;">
                    <h4 style="color: #e17055; margin-bottom: 5px;">‚ö†Ô∏è E se eu n√£o pagar o ITBI?</h4>
                    <p style="margin-left: 15px;">O cart√≥rio n√£o poder√° fazer a escritura e registrar o im√≥vel. Al√©m disso, voc√™ perder√° o ITBI gerado, caso n√£o pague o imposto at√© 31/12 do ano da emiss√£o.</p>
                </div>
                
                <div style="margin-bottom: 15px;">
                    <h4 style="color: #e17055; margin-bottom: 5px;">üè† Comprei pelo Minha Casa Minha Vida, pago ITBI?</h4>
                    <p style="margin-left: 15px;">Sim, mas o c√°lculo √© sobre o valor do financiamento habitacional. Algumas situa√ß√µes podem ter isen√ß√£o - consulte a SEMFAZ.</p>
                </div>
            </div>

            <div style="background: #f0fdf4; padding: 25px; border-radius: 15px; margin-top: 30px; border-left: 5px solid #00b894;">
                <h3 style="color: #047857; margin-bottom: 15px;">üéØ Agora voc√™ sabe!</h3>
                <p style="font-size: 1.1em;">
                    O ITBI √© um imposto simples: 2% sobre o valor do im√≥vel que voc√™ est√° adquirindo. O importante √© 
                    declarar o valor correto e pagar antes de ir ao cart√≥rio. Com as informa√ß√µes deste guia, voc√™ est√° 
                    preparado para calcular e pagar seu ITBI sem surpresas!
                </p>
            </div>

            <div style="text-align: center; margin-top: 30px;">
                <button class="interactive-button-primary" onclick="resetSteps()">üîÑ Calcular outro ITBI</button>
                <a href="https://gpi-trb.portovelho.ro.gov.br/ServerExec/acessoBase/?idPortal=dbde30ec-cf59-4803-9653-00121a704021" target="_blank" class="interactive-button-secondary" style="text-decoration: none; display: inline-block;">
                    üåê Portal SEMFAZ Online
                </a>
            </div>
        </div>
    </div>

    <!-- Footer SEMEC -->
    <footer class="mt-10 border-t-4 border-[#FFDD00] bg-[#70B643]">
        <div class="mx-auto w-full max-w-5xl px-4 py-6 sm:py-8 md:py-10">
            <!-- Header do Footer -->
            <div class="mb-6 flex flex-col items-center gap-4 sm:mb-8 sm:flex-row sm:justify-between sm:gap-6">
                <!-- Logo -->
                <div class="flex items-center gap-3 sm:gap-4">
                    <img src="Logo_Semec_Borda_Branca.png" alt="Logo oficial da SEMEC Porto Velho" width="100" height="100" class="h-auto w-[80px] drop-shadow-md sm:w-[90px] md:w-[100px]">
                </div>

                <!-- Texto da Secretaria -->
                <div class="text-center sm:text-right">
                    <p class="text-[0.65rem] font-medium uppercase tracking-[0.2em] text-white/90 sm:text-xs sm:tracking-[0.25em]">
                        Secretaria Municipal de Economia
                    </p>
                    <p class="text-[0.6rem] font-light uppercase tracking-[0.15em] text-white/70 sm:text-[0.7rem] sm:tracking-[0.2em]">
                        Porto Velho ‚Äî Rond√¥nia
                    </p>
                </div>
            </div>

            <!-- Cards Grid - Responsivo -->
            <div class="grid grid-cols-1 gap-3 sm:gap-4 md:grid-cols-2 lg:grid-cols-3">
                <!-- Card 1: Endere√ßo -->
                <article class="flex flex-col rounded-xl border border-white/40 bg-white/95 p-4 text-[color:var(--pv-blue-900)] shadow-lg shadow-black/10 sm:p-5">
                    <!-- Header do Card -->
                    <div class="flex items-center gap-2.5 border-b border-gray-100 pb-3 sm:gap-3 sm:pb-4">
                        <span class="flex h-9 w-9 shrink-0 items-center justify-center rounded-lg bg-[color:var(--pv-blue-900)] text-white shadow-md sm:h-11 sm:w-11 sm:rounded-xl">
                            <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="sm:hidden" aria-hidden="true">
                                <path d="M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z"></path>
                                <circle cx="12" cy="10" r="3"></circle>
                            </svg>
                            <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="hidden sm:block" aria-hidden="true">
                                <path d="M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z"></path>
                                <circle cx="12" cy="10" r="3"></circle>
                            </svg>
                        </span>
                        <div>
                            <p class="text-[0.6rem] font-semibold uppercase tracking-[0.12em] text-[color:var(--pv-blue-700)] sm:text-[0.65rem] sm:tracking-[0.15em]">
                                Endere√ßo
                            </p>
                            <h3 class="text-sm font-bold leading-tight text-[color:var(--pv-blue-900)] sm:text-base">
                                Sede SEMEC
                            </h3>
                        </div>
                    </div>

                    <!-- Conte√∫do -->
                    <div class="mt-3 flex-1 space-y-3 sm:mt-4 sm:space-y-4">
                        <address class="not-italic text-[0.8rem] leading-relaxed text-[color:var(--pv-blue-900)]/80 sm:text-sm">
                            <span class="font-medium text-[color:var(--pv-blue-900)]">
                                Av. Sete de Setembro, 744
                            </span>
                            <br>
                            Bairro Centro ‚Äî Porto Velho, RO
                        </address>

                        <div class="flex items-center gap-2 rounded-lg bg-[color:var(--pv-blue-900)]/5 px-2.5 py-2 sm:px-3">
                            <svg xmlns="http://www.w3.org/2000/svg" width="13" height="13" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="shrink-0 text-[color:var(--pv-blue-900)] sm:hidden" aria-hidden="true">
                                <circle cx="12" cy="12" r="10"></circle>
                                <polyline points="12 6 12 12 16 14"></polyline>
                            </svg>
                            <svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="hidden shrink-0 text-[color:var(--pv-blue-900)] sm:block" aria-hidden="true">
                                <circle cx="12" cy="12" r="10"></circle>
                                <polyline points="12 6 12 12 16 14"></polyline>
                            </svg>
                            <span class="text-[0.7rem] font-semibold text-[color:var(--pv-blue-900)] sm:text-xs">
                                Atendimento: 08h √†s 14h
                            </span>
                        </div>
                    </div>
                </article>

                <!-- Card 2: Contatos -->
                <article class="flex flex-col rounded-xl border border-white/40 bg-white/95 p-4 text-[color:var(--pv-blue-900)] shadow-lg shadow-black/10 sm:p-5">
                    <!-- Header do Card -->
                    <div class="flex items-center gap-2.5 border-b border-gray-100 pb-3 sm:gap-3 sm:pb-4">
                        <span class="flex h-9 w-9 shrink-0 items-center justify-center rounded-lg bg-[color:var(--pv-blue-900)] text-white shadow-md sm:h-11 sm:w-11 sm:rounded-xl">
                            <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="sm:hidden" aria-hidden="true">
                                <path d="M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z"></path>
                            </svg>
                            <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="hidden sm:block" aria-hidden="true">
                                <path d="M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z"></path>
                            </svg>
                        </span>
                        <div>
                            <p class="text-[0.6rem] font-semibold uppercase tracking-[0.12em] text-[color:var(--pv-blue-700)] sm:text-[0.65rem] sm:tracking-[0.15em]">
                                Contatos
                            </p>
                            <h3 class="text-sm font-bold leading-tight text-[color:var(--pv-blue-900)] sm:text-base">
                                Fale Conosco
                            </h3>
                        </div>
                    </div>

                    <!-- Lista de Contatos -->
                    <div class="mt-3 flex-1 space-y-2.5 sm:mt-4 sm:space-y-3">
                        <div class="flex items-start gap-2 sm:gap-3">
                            <span class="mt-0.5 flex h-5 w-5 shrink-0 items-center justify-center rounded bg-[color:var(--pv-blue-900)]/10 text-[color:var(--pv-blue-900)] sm:h-6 sm:w-6 sm:rounded-md">
                                <svg xmlns="http://www.w3.org/2000/svg" width="10" height="10" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="sm:hidden" aria-hidden="true">
                                    <path d="M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z"></path>
                                </svg>
                                <svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="hidden sm:block" aria-hidden="true">
                                    <path d="M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z"></path>
                                </svg>
                            </span>
                            <div class="min-w-0 flex-1">
                                <p class="text-[0.55rem] font-semibold uppercase tracking-wider text-[color:var(--pv-blue-700)] sm:text-[0.6rem]">
                                    Gabinete
                                </p>
                                <p class="text-[0.75rem] font-medium text-[color:var(--pv-blue-900)] sm:text-sm">
                                    (69) 3901-6281
                                </p>
                            </div>
                        </div>

                        <div class="flex items-start gap-2 sm:gap-3">
                            <span class="mt-0.5 flex h-5 w-5 shrink-0 items-center justify-center rounded bg-[color:var(--pv-blue-900)]/10 text-[color:var(--pv-blue-900)] sm:h-6 sm:w-6 sm:rounded-md">
                                <svg xmlns="http://www.w3.org/2000/svg" width="10" height="10" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="sm:hidden" aria-hidden="true">
                                    <rect width="20" height="16" x="2" y="4" rx="2"></rect>
                                    <path d="m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7"></path>
                                </svg>
                                <svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="hidden sm:block" aria-hidden="true">
                                    <rect width="20" height="16" x="2" y="4" rx="2"></rect>
                                    <path d="m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7"></path>
                                </svg>
                            </span>
                            <div class="min-w-0 flex-1">
                                <p class="text-[0.55rem] font-semibold uppercase tracking-wider text-[color:var(--pv-blue-700)] sm:text-[0.6rem]">
                                    E-mail institucional
                                </p>
                                <a href="mailto:gab.semec@portovelho.ro.gov.br" class="block break-all text-[0.75rem] font-medium text-[color:var(--pv-blue-900)] underline-offset-2 hover:underline sm:text-sm sm:break-normal sm:truncate" title="gab.semec@portovelho.ro.gov.br">
                                    gab.semec@portovelho.ro.gov.br
                                </a>
                            </div>
                        </div>

                        <div class="flex items-start gap-2 sm:gap-3">
                            <span class="mt-0.5 flex h-5 w-5 shrink-0 items-center justify-center rounded bg-[color:var(--pv-blue-900)]/10 text-[color:var(--pv-blue-900)] sm:h-6 sm:w-6 sm:rounded-md">
                                <svg xmlns="http://www.w3.org/2000/svg" width="10" height="10" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="sm:hidden" aria-hidden="true">
                                    <rect width="20" height="16" x="2" y="4" rx="2"></rect>
                                    <path d="m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7"></path>
                                </svg>
                                <svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="hidden sm:block" aria-hidden="true">
                                    <rect width="20" height="16" x="2" y="4" rx="2"></rect>
                                    <path d="m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7"></path>
                                </svg>
                            </span>
                            <div class="min-w-0 flex-1">
                                <p class="text-[0.55rem] font-semibold uppercase tracking-wider text-[color:var(--pv-blue-700)] sm:text-[0.6rem]">
                                    D√∫vidas Tribut√°rias
                                </p>
                                <a href="mailto:reformatrib.semec@portovelho.ro.gov.br" class="block break-all text-[0.75rem] font-medium text-[color:var(--pv-blue-900)] underline-offset-2 hover:underline sm:text-sm sm:break-normal sm:truncate" title="reformatrib.semec@portovelho.ro.gov.br">
                                    reformatrib.semec@portovelho.ro.gov.br
                                </a>
                            </div>
                        </div>

                        <!-- WhatsApp -->
                        <a href="https://api.whatsapp.com/send?phone=556999425251" target="_blank" rel="noopener noreferrer" class="group !mt-3 flex items-center gap-2.5 rounded-lg border border-[#70B643] bg-white p-2.5 transition hover:bg-[#70B643]/5 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-[#70B643] sm:!mt-4 sm:gap-3 sm:p-3">
                            <span class="flex h-9 w-9 shrink-0 items-center justify-center rounded-full border-2 border-[#70B643] bg-white text-[#70B643] shadow-sm transition group-hover:scale-105 sm:h-10 sm:w-10">
                                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" class="sm:hidden" aria-hidden="true">
                                    <path d="M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893a11.821 11.821 0 00-3.48-8.413z"></path>
                                </svg>
                                <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="currentColor" class="hidden sm:block" aria-hidden="true">
                                    <path d="M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893a11.821 11.821 0 00-3.48-8.413z"></path>
                                </svg>
                            </span>
                            <div class="min-w-0 flex-1">
                                <p class="text-[0.55rem] font-semibold uppercase tracking-wider text-[color:var(--pv-blue-700)] sm:text-[0.6rem]">
                                    WhatsApp
                                </p>
                                <p class="text-[0.7rem] font-medium text-[color:var(--pv-blue-900)] sm:text-xs">
                                    (69) 9 9942-5251
                                </p>
                            </div>
                        </a>
                    </div>
                </article>

                <!-- Card 3: Redes Sociais -->
                <article class="flex flex-col rounded-xl border border-white/40 bg-white/95 p-4 text-[color:var(--pv-blue-900)] shadow-lg shadow-black/10 sm:p-5 md:col-span-2 lg:col-span-1">
                    <!-- Header do Card -->
                    <div class="flex items-center gap-2.5 border-b border-gray-100 pb-3 sm:gap-3 sm:pb-4">
                        <span class="flex h-9 w-9 shrink-0 items-center justify-center rounded-lg bg-[color:var(--pv-blue-900)] text-white shadow-md sm:h-11 sm:w-11 sm:rounded-xl">
                            <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="sm:hidden" aria-hidden="true">
                                <rect width="20" height="20" x="2" y="2" rx="5" ry="5"></rect>
                                <path d="M16 11.37A4 4 0 1 1 12.63 8 4 4 0 0 1 16 11.37z"></path>
                                <line x1="17.5" x2="17.51" y1="6.5" y2="6.5"></line>
                            </svg>
                            <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="hidden sm:block" aria-hidden="true">
                                <rect width="20" height="20" x="2" y="2" rx="5" ry="5"></rect>
                                <path d="M16 11.37A4 4 0 1 1 12.63 8 4 4 0 0 1 16 11.37z"></path>
                                <line x1="17.5" x2="17.51" y1="6.5" y2="6.5"></line>
                            </svg>
                        </span>
                        <div>
                            <p class="text-[0.6rem] font-semibold uppercase tracking-[0.12em] text-[color:var(--pv-blue-700)] sm:text-[0.65rem] sm:tracking-[0.15em]">
                                Redes Sociais
                            </p>
                            <h3 class="text-sm font-bold leading-tight text-[color:var(--pv-blue-900)] sm:text-base">
                                Siga a SEMEC
                            </h3>
                        </div>
                    </div>

                    <!-- Conte√∫do -->
                    <div class="mt-3 flex-1 space-y-3 sm:mt-4 sm:space-y-4">
                        <p class="text-[0.8rem] leading-relaxed text-[color:var(--pv-blue-900)]/80 sm:text-sm">
                            Acompanhe nossos canais oficiais e fique por dentro das novidades sobre a <strong class="text-[color:var(--pv-blue-900)]">Reforma Tribut√°ria do Consumo</strong>.
                        </p>

                        <div class="flex flex-wrap gap-2 sm:gap-3">
                            <a href="https://www.instagram.com/semec.pvh/" target="_blank" rel="noopener noreferrer" class="group flex items-center gap-2 rounded-lg border border-[#F7A1C4] bg-[#FDE9F1] px-3 py-2 shadow-sm transition hover:bg-[#F9C5DA] hover:shadow-md sm:px-4 sm:py-2.5">
                                <span class="flex h-7 w-7 items-center justify-center rounded bg-gradient-to-br from-[#f58529] via-[#dd2a7b] to-[#8134af] p-[1px] transition group-hover:scale-110 sm:h-8 sm:w-8 sm:rounded-md">
                                    <span class="flex h-full w-full items-center justify-center rounded bg-white text-[#C13584] sm:rounded-md">
                                        <svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="sm:hidden" aria-hidden="true">
                                        <rect width="20" height="20" x="2" y="2" rx="5" ry="5"></rect>
                                        <path d="M16 11.37A4 4 0 1 1 12.63 8 4 4 0 0 1 16 11.37z"></path>
                                        <line x1="17.5" x2="17.51" y1="6.5" y2="6.5"></line>
                                    </svg>
                                        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="hidden sm:block" aria-hidden="true">
                                        <rect width="20" height="20" x="2" y="2" rx="5" ry="5"></rect>
                                        <path d="M16 11.37A4 4 0 1 1 12.63 8 4 4 0 0 1 16 11.37z"></path>
                                        <line x1="17.5" x2="17.51" y1="6.5" y2="6.5"></line>
                                    </svg>
                                    </span>
                                </span>
                                <span class="text-[0.8rem] font-semibold text-[color:var(--pv-blue-900)] sm:text-sm">
                                    @semec.pvh
                                </span>
                            </a>
                        </div>
                    </div>
                </article>
            </div>

            <!-- Copyright -->
            <div class="mt-6 border-t border-white/20 pt-4 text-center sm:mt-8">
                <p class="text-[0.6rem] text-white/60 sm:text-[0.65rem]">
                    ¬© 2024 Prefeitura Municipal de Porto Velho ‚Ä¢ Todos os direitos reservados
                </p>
            </div>
        </div>

        <!-- Banner decorativo -->
        <div aria-hidden="true" class="h-7 w-full bg-repeat-x sm:h-9" style="background-image: url('footer-banner.png'); background-size: 328px 48px; background-position: left center;"></div>
    </footer>

    <script>
        let currentStep = 1;
        let selectedType = '';
        const totalSteps = 5;

        function selectType(type) {
            selectedType = type;
            
            // Reset visual state of cards
            document.querySelectorAll('.type-card').forEach(card => {
                card.classList.remove('selected');
            });
            
            // Add selected state to clicked card
            document.getElementById(type + '-card').classList.add('selected');
            
            // Enable continue button
            const continueButton = document.getElementById('continue-button');
            continueButton.style.opacity = '1';
            continueButton.style.cursor = 'pointer';
            continueButton.disabled = false;
            
            console.log('Tipo selecionado:', type);
        }

        function nextStep() {
            if (currentStep < totalSteps) {
                // Hide current step
                document.querySelector(`.step-content[data-step="${currentStep}"]`).classList.add('hidden');
                
                // Special handling for step 3 (type-specific content)
                if (currentStep === 2 && selectedType) {
                    // Hide both type-specific sections initially
                    document.getElementById('urbano-section').classList.add('hidden');
                    document.getElementById('rural-section').classList.add('hidden');
                    
                    currentStep++;
                    
                    // Show the appropriate type section
                    if (selectedType === 'urbano') {
                        document.getElementById('urbano-section').classList.remove('hidden');
                    } else if (selectedType === 'rural') {
                        document.getElementById('rural-section').classList.remove('hidden');
                    }
                } else {
                    // Normal step progression
                    currentStep++;
                    const nextElement = document.querySelector(`.step-content[data-step="${currentStep}"]`);
                    if (nextElement) {
                        nextElement.classList.remove('hidden');
                    }
                }
                
                updateStepIndicator();
                window.scrollTo({ top: 0, behavior: 'smooth' });
            }
        }

        function updateStepIndicator() {
            document.querySelectorAll('.step').forEach((step, index) => {
                const stepNumber = index + 1;
                if (stepNumber <= currentStep) {
                    step.classList.add('active');
                } else {
                    step.classList.remove('active');
                }
            });
        }

        function resetSteps() {
            // Hide all step content
            document.querySelectorAll('.step-content').forEach(step => {
                step.classList.add('hidden');
            });
            
            // Reset type selection
            selectedType = '';
            document.querySelectorAll('.type-card').forEach(card => {
                card.classList.remove('selected');
            });
            
            // Disable continue button
            const continueButton = document.getElementById('continue-button');
            if (continueButton) {
                continueButton.style.opacity = '0.5';
                continueButton.style.cursor = 'not-allowed';
                continueButton.disabled = true;
            }
            
            // Show first step
            currentStep = 1;
            document.querySelector(`[data-step="${currentStep}"].step-content`).classList.remove('hidden');
            updateStepIndicator();
            
            window.scrollTo({ top: 0, behavior: 'smooth' });
        }

        // Add click handlers to step indicators
        function initializeStepIndicators() {
            document.querySelectorAll('.step').forEach((step, index) => {
                step.addEventListener('click', () => {
                    const targetStep = index + 1;
                    
                    if (targetStep <= currentStep) {
                        // Hide current step
                        document.querySelector(`.step-content[data-step="${currentStep}"]`).classList.add('hidden');
                        
                        // Hide type-specific sections if going to/from step 3
                        document.getElementById('urbano-section').classList.add('hidden');
                        document.getElementById('rural-section').classList.add('hidden');
                        
                        // Show target step
                        currentStep = targetStep;
                        
                        if (currentStep === 3 && selectedType) {
                            // Special handling for step 3
                            if (selectedType === 'urbano') {
                                document.getElementById('urbano-section').classList.remove('hidden');
                            } else if (selectedType === 'rural') {
                                document.getElementById('rural-section').classList.remove('hidden');
                            }
                        } else {
                            // Normal step
                            const targetElement = document.querySelector(`[data-step="${currentStep}"].step-content`);
                            if (targetElement) {
                                targetElement.classList.remove('hidden');
                            }
                        }
                        
                        updateStepIndicator();
                        window.scrollTo({ top: 0, behavior: 'smooth' });
                    }
                });
            });
        }

        // Animate progress bars when they come into view
        function animateProgressBars() {
            const progressBars = document.querySelectorAll('.progress-fill');
            progressBars.forEach(bar => {
                const observer = new IntersectionObserver((entries) => {
                    entries.forEach(entry => {
                        if (entry.isIntersecting) {
                            setTimeout(() => {
                                const currentWidth = entry.target.style.width;
                                entry.target.style.width = '0%';
                                setTimeout(() => {
                                    entry.target.style.width = currentWidth;
                                }, 100);
                            }, 500);
                        }
                    });
                });
                observer.observe(bar);
            });
        }

        // ===== Busca Retr√°til e Funcionalidade de Busca =====
        const SEARCH_ROOT_SELECTOR = "[data-search-root]";
        const HIGHLIGHT_ATTRIBUTE = "data-search-highlight";
        const HIGHLIGHT_CLASS_NAME = "site-search-highlight";

        function getSearchRoots() {
            return Array.from(document.querySelectorAll(SEARCH_ROOT_SELECTOR));
        }

        function openDetailsAncestors(element) {
            let parent = element.parentElement;
            while (parent) {
                if (parent instanceof HTMLDetailsElement) {
                    parent.open = true;
                }
                parent = parent.parentElement;
            }
        }

        function collectTextNodes(root) {
            const nodes = [];
            const walker = document.createTreeWalker(
                root,
                NodeFilter.SHOW_TEXT,
                {
                    acceptNode(node) {
                        if (!node.textContent?.trim()) {
                            return NodeFilter.FILTER_REJECT;
                        }

                        const parent = node.parentElement;
                        if (!parent) {
                            return NodeFilter.FILTER_REJECT;
                        }

                        if (
                            parent.closest(`[${HIGHLIGHT_ATTRIBUTE}]`) ||
                            parent.closest("[data-search-ignore='true']") ||
                            parent.closest("script, style") ||
                            parent.closest("[aria-hidden='true']")
                        ) {
                            return NodeFilter.FILTER_REJECT;
                        }

                        return NodeFilter.FILTER_ACCEPT;
                    },
                }
            );

            let currentNode = walker.nextNode();
            while (currentNode) {
                nodes.push(currentNode);
                currentNode = walker.nextNode();
            }

            return nodes;
        }

        function highlightNodeMatches(node, normalizedTerm, hits) {
            if (!node.data || !normalizedTerm) {
                return;
            }

            const termLength = normalizedTerm.length;
            let currentNode = node;
            let remainingText = currentNode.data;
            let matchIndex = remainingText.toLowerCase().indexOf(normalizedTerm);

            while (matchIndex !== -1) {
                const matchNode = currentNode.splitText(matchIndex);
                const afterMatchNode = matchNode.splitText(termLength);
                const highlight = document.createElement("mark");
                highlight.className = HIGHLIGHT_CLASS_NAME;
                highlight.setAttribute(HIGHLIGHT_ATTRIBUTE, "true");
                highlight.setAttribute("tabindex", "-1");
                matchNode.parentNode?.insertBefore(highlight, matchNode);
                highlight.appendChild(matchNode);
                openDetailsAncestors(highlight);
                hits.push(highlight);
                currentNode = afterMatchNode;
                remainingText = currentNode.data ?? "";
                matchIndex = remainingText.toLowerCase().indexOf(normalizedTerm);
            }
        }

        function highlightMatches(term) {
            const normalizedTerm = term.toLowerCase();
            if (!normalizedTerm) {
                return [];
            }

            const hits = [];
            const roots = getSearchRoots();

            roots.forEach((root) => {
                const textNodes = collectTextNodes(root);
                textNodes.forEach((node) =>
                    highlightNodeMatches(node, normalizedTerm, hits)
                );
            });

            return hits;
        }

        function clearHighlights() {
            const highlights = document.querySelectorAll(
                `mark[${HIGHLIGHT_ATTRIBUTE}]`
            );

            highlights.forEach((highlight) => {
                const parent = highlight.parentNode;
                if (!parent) {
                    return;
                }

                const textContent = highlight.textContent ?? "";
                parent.replaceChild(document.createTextNode(textContent), highlight);

                if (parent instanceof Element || parent instanceof DocumentFragment) {
                    parent.normalize();
                }
            });

            getSearchRoots().forEach((root) => root.normalize());
        }

        function showFeedback(message) {
            const feedbackEl = document.getElementById('search-feedback');
            if (feedbackEl) {
                feedbackEl.textContent = message;
                feedbackEl.classList.remove('hidden');
                setTimeout(() => {
                    feedbackEl.classList.add('hidden');
                }, 4000);
            }
        }

        // Toggle da busca
        const searchToggle = document.getElementById('search-toggle');
        const searchForm = document.getElementById('site-search-form');
        const searchInput = document.getElementById('site-search');

        if (searchToggle && searchForm) {
            searchToggle.addEventListener('click', (e) => {
                e.stopPropagation();
                searchForm.classList.toggle('hidden');
                if (!searchForm.classList.contains('hidden')) {
                    searchInput.focus();
                }
            });

            // Fechar ao clicar fora
            document.addEventListener('click', (e) => {
                if (!searchForm.contains(e.target) && !searchToggle.contains(e.target)) {
                    searchForm.classList.add('hidden');
                }
            });

            // Busca ao submeter formul√°rio
            searchForm.addEventListener('submit', (e) => {
                e.preventDefault();
                const trimmedQuery = searchInput.value.trim();

                if (trimmedQuery.length < 3) {
                    clearHighlights();
                    showFeedback("Por favor, informe ao menos 3 caracteres para buscar.");
                    return;
                }

                const hasSearchableContent = getSearchRoots().length > 0;
                if (!hasSearchableContent) {
                    showFeedback("N√£o h√° conte√∫do dispon√≠vel para pesquisa nesta p√°gina.");
                    return;
                }

                clearHighlights();

                const hits = highlightMatches(trimmedQuery);

                if (!hits.length) {
                    showFeedback("Nenhum resultado encontrado.");
                    return;
                }

                const firstHit = hits[0];
                firstHit.scrollIntoView({ behavior: "smooth", block: "center" });
                if (typeof firstHit.focus === "function") {
                    firstHit.focus({ preventScroll: true });
                }

                showFeedback(
                    hits.length === 1
                        ? "1 resultado encontrado."
                        : `${hits.length} resultados encontrados.`
                );
            });

            // Limpar destaques quando busca for limpa
            searchInput.addEventListener('input', () => {
                if (!searchInput.value.trim()) {
                    clearHighlights();
                    const feedbackEl = document.getElementById('search-feedback');
                    if (feedbackEl) {
                        feedbackEl.classList.add('hidden');
                    }
                }
            });
        }

        // Initialize when page loads
        document.addEventListener('DOMContentLoaded', () => {
            initializeStepIndicators();
            animateProgressBars();
            updateStepIndicator();
        });
    </script>
</body>
</html>
